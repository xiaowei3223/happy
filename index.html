<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>celebrateday</title>
<script>
// 已认识多少天
function GetDateDiffstart(startTime) {
    startTime = startTime.replace(/\-/g, "/");
    var sTime = new Date(startTime);
    var eTime = new Date();
    var timeType = 1000 * 3600 * 24;
    var diffday = parseInt((eTime - sTime) / timeType);
    return diffday >= 0 ? diffday : -diffday;
}

// 获取下一个整数百天纪念日天数
function getNextCelebrateNumber(currentDays, step) {
    return Math.ceil(currentDays / step) * step;
}

// 在日期上加天数
function DateAdd(interval, number, date) {
    if (interval === "d") {
        date.setDate(date.getDate() + number);
    }
    return date;
}

// 根据起始日期和天数得纪念日是哪天
function getCelebrateDay(startTime, days) {
    startTime = startTime.replace(/\-/g, "/");
    var sTime = new Date(startTime);
    var newDate = DateAdd("d", days, sTime);
    return newDate.toLocaleDateString();
}

// 自动获取下一个生日（今年没到就用今年，今年到了就用明年）
function getNextBirthday(month, day) {
    var now = new Date();
    var year = now.getFullYear();
    var birthday = new Date(year, month - 1, day);
    if (birthday < now) {
        birthday.setFullYear(year + 1);
    }
    return birthday.toISOString().slice(0, 10);
}

// 距离某日还有多少天
function GetDateDiffend(EndTime) {
    EndTime = EndTime.replace(/\-/g, "/");
    var sTime = new Date(EndTime);
    var eTime = new Date();
    var timeType = 1000 * 3600 * 24;
    var diffday = parseInt((sTime - eTime) / timeType);
    return diffday >= 0 ? diffday : -diffday;
}
</script>
</head>

<body>
<center>
<h1>好好学习，天天向上</h1>
<div style="padding-right: 10%">
<p align="right">时有女子，亦有宁姝；美口善言，和颜善笑。</p>
</div>
<hr>

<table border="" cellspacing="" cellpadding="" style="background-color: #e5ffe5; width: 80%;">
<tr>
<td width="50%" style="padding: 32px;">
<div>
<p>现在是 
    <span style="color:#00ccff;"> 
        <script>document.write(new Date().toLocaleString())</script>
    </span>
</p>
<hr>

<h2 style="text-align: center;">相识与恋爱</h2>
<p>2018年11月27日认识，已认识
    <span style="color:#00ccff; font-size:24px;"> 
        <script>
        var rsDays = GetDateDiffstart("2018/11/27");
        document.write(rsDays);
        </script>
    </span> 天
</p>
<p>下一个整数百天纪念日是第
    <span style="color:#00ccff; font-size:24px;">
        <script>
        var nextRs = getNextCelebrateNumber(rsDays, 100);
        document.write(nextRs);
        </script>
    </span> 天（即
    <span style="color:#00ccff; font-size:24px;">
        <script>
        document.write(getCelebrateDay("2018/11/27", nextRs));
        </script>
    </span>，距离还有
    <span style="color:#00ccff; font-size:24px;">
        <script>
        document.write(nextRs - rsDays);
        </script>
    </span> 天)
</p>

<hr>

<p>2019年2月14日成为恋人，已恋爱
    <span style="color:#00ccff; font-size:24px;"> 
        <script>
        var laDays = GetDateDiffstart("2019/02/14");
        document.write(laDays);
        </script>
    </span> 天
</p>
<p>下一个整数百天纪念日是第
    <span style="color:#00ccff; font-size:24px;">
        <script>
        var nextLa = getNextCelebrateNumber(laDays, 100);
        document.write(nextLa);
        </script>
    </span> 天（即
    <span style="color:#00ccff; font-size:24px;">
        <script>
        document.write(getCelebrateDay("2019/02/14", nextLa));
        </script>
    </span>，距离还有
    <span style="color:#00ccff; font-size:24px;">
        <script>
        document.write(nextLa - laDays);
        </script>
    </span> 天)
</p>

<hr>

<h2 style="text-align: center;">生日倒计时</h2>
<p>离公子萧兮下一个生日还有 
    <span style="color:#00ccff; font-size:24px;"> 
        <script>
        var gxNext = getNextBirthday(7, 8);
        document.write(GetDateDiffend(gxNext) + " 天");
        </script>
    </span>
</p>

<p>离远志下一个生日还有 
    <span style="color:#00ccff; font-size:24px;"> 
        <script>
        var yzNext = getNextBirthday(3, 1);
        document.write(GetDateDiffend(yzNext) + " 天");
        </script>
    </span>
</p>

</div>
</td>
</tr>
</table>
</center>
</body>
</html>
